<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>デジタル時計</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: black;
        }
        #container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #date {
            width: 400px;
            height: 50px;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        #clock {
            width: 600px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .digit {
            width: 120px;
            height: 200px;
            position: relative;
        }
        .date-digit {
            width: 40px;
            height: 50px;
            position: relative;
        }
        .colon, .dot {
            width: 20px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .date-dot {
            width: 10px;
            height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .colon-dot {
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            margin: 30px 0;
        }
        .date-dot-dot {
            width: 5px;
            height: 5px;
            background-color: orange;
            border-radius: 50%;
            margin: 5px 0;
        }
        .colon.hidden .colon-dot, .dot.hidden .date-dot-dot {
            background-color: #333333;
        }
        .segment {
            fill: white;
            stroke: white;
            stroke-width: 6; /* 4 * 1.5 */
        }
        .date-segment {
            fill: orange;
            stroke: orange;
            stroke-width: 3; /* 2 * 1.5 */
        }
        .segment.off {
            fill: #333333;
            stroke: #333333;
        }
        .date-segment.off {
            fill: #333333;
            stroke: #333333;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="date">
            <div class="date-digit" id="date1"></div>
            <div class="date-digit" id="date2"></div>
            <div class="date-digit" id="date3"></div>
            <div class="date-digit" id="date4"></div>
            <div class="date-dot" id="dot1">
                <div class="date-dot-dot"></div>
            </div>
            <div class="date-digit" id="date5"></div>
            <div class="date-digit" id="date6"></div>
            <div class="date-dot" id="dot2">
                <div class="date-dot-dot"></div>
            </div>
            <div class="date-digit" id="date7"></div>
            <div class="date-digit" id="date8"></div>
        </div>
        <div id="clock">
            <div class="digit" id="digit1"></div>
            <div class="digit" id="digit2"></div>
            <div class="colon" id="colon">
                <div class="colon-dot"></div>
                <div class="colon-dot"></div>
            </div>
            <div class="digit" id="digit3"></div>
            <div class="digit" id="digit4"></div>
        </div>
    </div>

    <script>
        // 時刻用7セグメントSVG（高さ200px、間隔10px、gの横幅12px短縮）
        const segmentSVG = (id) => `
            <svg width="120" height="200" viewBox="0 -5 120 210">
                <!-- セグメントa（上部水平） -->
                <polygon class="segment" id="${id}-a" points="30,5 90,5 95,10 90,15 30,15 25,10"/>
                <!-- セグメントb（右上垂直） -->
                <polygon class="segment" id="${id}-b" points="95,25 100,20 105,25 105,90 100,95 95,90"/>
                <!-- セグメントc（右下垂直） -->
                <polygon class="segment" id="${id}-c" points="95,110 100,105 105,110 105,175 100,180 95,175"/>
                <!-- セグメントd（下部水平） -->
                <polygon class="segment" id="${id}-d" points="30,195 90,195 95,190 90,185 30,185 25,190"/>
                <!-- セグメントe（左下垂直） -->
                <polygon class="segment" id="${id}-e" points="15,110 20,105 25,110 25,175 20,180 15,175"/>
                <!-- セグメントf（左上垂直） -->
                <polygon class="segment" id="${id}-f" points="15,25 20,20 25,25 25,90 20,95 15,90"/>
                <!-- セグメントg（中部水平、横幅12px短縮、センタリング） -->
                <polygon class="segment" id="${id}-g" points="36,95 84,95 89,100 84,105 36,105 31,100"/>
            </svg>
        `;

        // 日付用7セグメントSVG（高さ50px、間隔5px、変更なし）
        const dateSegmentSVG = (id) => `
            <svg width="40" height="50" viewBox="0 -1 40 51">
                <!-- セグメントa（上部水平） -->
                <polygon class="date-segment" id="${id}-a" points="10,1.5 30,1.5 32,3.5 30,5.5 10,5.5 8,3.5"/>
                <!-- セグメントb（右上垂直） -->
                <polygon class="date-segment" id="${id}-b" points="32,8.5 34,6.5 36,8.5 36,21 34,23 32,21"/>
                <!-- セグメントc（右下垂直） -->
                <polygon class="date-segment" id="${id}-c" points="32,31 34,29 36,31 36,41.5 34,43.5 32,41.5"/>
                <!-- セグメントd（下部水平） -->
                <polygon class="date-segment" id="${id}-d" points="10,48.5 30,48.5 32,46.5 30,44.5 10,44.5 8,46.5"/>
                <!-- セグメントe（左下垂直） -->
                <polygon class="date-segment" id="${id}-e" points="4,31 6,29 8,31 8,41.5 6,43.5 4,41.5"/>
                <!-- セグメントf（左上垂直） -->
                <polygon class="date-segment" id="${id}-f" points="4,8.5 6,6.5 8,8.5 8,21 6,23 4,21"/>
                <!-- セグメントg（中部水平） -->
                <polygon class="date-segment" id="${id}-g" points="10,24 30,24 32,26 30,28 10,28 8,26"/>
            </svg>
        `;

        // 7セグメントの表示パターン (0-9)
        const patterns = {
            '0': ['a', 'b', 'c', 'd', 'e', 'f'],
            '1': ['b', 'c'],
            '2': ['a', 'b', 'd', 'e', 'g'],
            '3': ['a', 'b', 'c', 'd', 'g'],
            '4': ['b', 'c', 'f', 'g'],
            '5': ['a', 'c', 'd', 'f', 'g'],
            '6': ['a', 'c', 'd', 'e', 'f', 'g'],
            '7': ['a', 'b', 'c'],
            '8': ['a', 'b', 'c', 'd', 'e', 'f', 'g'],
            '9': ['a', 'b', 'c', 'd', 'f', 'g']
        };

        // SVGを各桁に設定
        ['digit1', 'digit2', 'digit3', 'digit4'].forEach(id => {
            document.getElementById(id).innerHTML = segmentSVG(id.replace('digit', 'd'));
        });
        ['date1', 'date2', 'date3', 'date4', 'date5', 'date6', 'date7', 'date8'].forEach(id => {
            document.getElementById(id).innerHTML = dateSegmentSVG(id);
        });

        // ランダムシャッフル表示（1コマ）
        function shuffleSegments() {
            const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
            // 時刻のシャッフル
            ['d1', 'd2', 'd3', 'd4'].forEach(digitId => {
                segments.forEach(segment => {
                    const element = document.getElementById(`${digitId}-${segment}`);
                    if (element) {
                        if (Math.random() > 0.5) {
                            element.style.fill = 'white';
                            element.style.stroke = 'white';
                            element.classList.remove('off');
                        } else {
                            element.style.fill = '#333333';
                            element.style.stroke = '#333333';
                            element.classList.add('off');
                        }
                    }
                });
            });
            // 日付のシャッフル
            ['date1', 'date2', 'date3', 'date4', 'date5', 'date6', 'date7', 'date8'].forEach(digitId => {
                segments.forEach(segment => {
                    const element = document.getElementById(`${digitId}-${segment}`);
                    if (element) {
                        if (Math.random() > 0.5) {
                            element.style.fill = 'orange';
                            element.style.stroke = 'orange';
                            element.classList.remove('off');
                        } else {
                            element.style.fill = '#333333';
                            element.style.stroke = '#333333';
                            element.classList.add('off');
                        }
                    }
                });
            });
            // コロンとドットのシャッフル
            document.getElementById('colon').classList.toggle('hidden', Math.random() > 0.5);
            document.getElementById('dot1').classList.toggle('hidden', Math.random() > 0.5);
            document.getElementById('dot2').classList.toggle('hidden', Math.random() > 0.5);
        }

        // 時刻と日付の更新
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const year = String(now.getFullYear());
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const time = hours + minutes;
            const date = year + month + day;

            // 時刻の更新
            ['d1', 'd2', 'd3', 'd4'].forEach((digitId, index) => {
                const digit = time[index];
                const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
                // 00:00〜09:59のとき、一桁目の「0」を#333で表示
                if (index === 0 && hours < 10 && digit === '0') {
                    segments.forEach(segment => {
                        const element = document.getElementById(`${digitId}-${segment}`);
                        if (element) {
                            element.style.fill = '#333333';
                            element.style.stroke = '#333333';
                            element.classList.add('off');
                        }
                    });
                } else {
                    segments.forEach(segment => {
                        const element = document.getElementById(`${digitId}-${segment}`);
                        if (element) {
                            if (patterns[digit].includes(segment)) {
                                element.style.fill = 'white';
                                element.style.stroke = 'white';
                                element.classList.remove('off');
                            } else {
                                element.style.fill = '#333333';
                                element.style.stroke = '#333333';
                                element.classList.add('off');
                            }
                        }
                    });
                }
            });

            // 日付の更新
            ['date1', 'date2', 'date3', 'date4', 'date5', 'date6', 'date7', 'date8'].forEach((digitId, index) => {
                const digit = date[index];
                const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
                segments.forEach(segment => {
                    const element = document.getElementById(`${digitId}-${segment}`);
                    if (element) {
                        if (patterns[digit].includes(segment)) {
                            element.style.fill = 'orange';
                            element.style.stroke = 'orange';
                            element.classList.remove('off');
                        } else {
                            element.style.fill = '#333333';
                            element.style.stroke = '#333333';
                            element.classList.add('off');
                        }
                    }
                });
            });

            // コロンとドットの点滅
            const colon = document.getElementById('colon');
            const dot1 = document.getElementById('dot1');
            const dot2 = document.getElementById('dot2');
            colon.classList.toggle('hidden');
            dot1.classList.toggle('hidden');
            dot2.classList.toggle('hidden');
        }

        // デバッグ用：初期状態で数字「8」を表示（全セグメント点灯）
        function testDisplay() {
            ['d1', 'd2', 'd3', 'd4'].forEach(digitId => {
                const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
                segments.forEach(segment => {
                    const element = document.getElementById(`${digitId}-${segment}`);
                    if (element) {
                        element.style.fill = 'white';
                        element.style.stroke = 'white';
                        element.classList.remove('off');
                    }
                });
            });
            ['date1', 'date2', 'date3', 'date4', 'date5', 'date6', 'date7', 'date8'].forEach(digitId => {
                const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
                segments.forEach(segment => {
                    const element = document.getElementById(`${digitId}-${segment}`);
                    if (element) {
                        element.style.fill = 'orange';
                        element.style.stroke = 'orange';
                        element.classList.remove('off');
                    }
                });
            });
        }

        // 初期表示テスト
        testDisplay();

        // シャッフルアニメーション（0.1秒×5コマ）
        let shuffleCount = 0;
        const shuffleInterval = setInterval(() => {
            shuffleSegments();
            shuffleCount++;
            if (shuffleCount >= 5) {
                clearInterval(shuffleInterval);
                updateClock();
                // 1秒ごとに更新
                setInterval(updateClock, 1000);
            }
        }, 100);
    </script>
</body>
</html>